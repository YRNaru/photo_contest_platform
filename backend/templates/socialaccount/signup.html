{% extends "base.html" %}

{% block title %}ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ² - VRChat Photo Contest{% endblock %}

{% block header_title %}ğŸ‘¤ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²{% endblock %}
{% block header_subtitle %}ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ç™»éŒ²{% endblock %}

{% block content %}
<form method="post" action="{% url 'socialaccount_signup' %}">
    {% csrf_token %}
    
    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 30px;">
        <p style="margin: 0; color: #666; font-size: 0.95em;">
            <strong style="color: #333;">{{ provider.name }}</strong> ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã¾ã™ã€‚
        </p>
        <p style="margin: 10px 0 0 0; color: #666; font-size: 0.85em;">
            ä»¥ä¸‹ã®æƒ…å ±ã‚’ç¢ºèªã—ã¦ã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
        </p>
    </div>
    
    {% if form.errors %}
        <div class="message error">
            <strong>ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Šã¾ã™ï¼š</strong>
            <ul style="margin: 10px 0 0 20px;">
                {% for field, errors in form.errors.items %}
                    {% for error in errors %}
                        <li>{{ field }}: {{ error }}</li>
                    {% endfor %}
                {% endfor %}
            </ul>
        </div>
    {% endif %}
    
    <div class="form-group">
        <label for="id_email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
        <input type="email" 
               name="email" 
               id="id_email" 
               value="{{ form.email.value|default:'' }}"
               required
               {% if form.email.value %}readonly{% endif %}
               style="{% if form.email.value %}background: #f5f5f5; cursor: not-allowed;{% endif %}">
        {% if form.email.errors %}
            <ul class="errorlist">
                {% for error in form.email.errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        {% endif %}
        {% if form.email.value %}
            <p class="helptext">ã“ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ {{ provider.name }} ã‹ã‚‰å–å¾—ã•ã‚Œã¾ã—ãŸã€‚</p>
        {% endif %}
    </div>
    
    {% if form.username %}
    <div class="form-group">
        <label for="id_username">ãƒ¦ãƒ¼ã‚¶ãƒ¼å *</label>
        <input type="text" 
               name="username" 
               id="id_username" 
               value="{{ form.username.value|default:'' }}"
               required>
        {% if form.username.errors %}
            <ul class="errorlist">
                {% for error in form.username.errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        {% endif %}
        <p class="helptext">åŠè§’è‹±æ•°å­—ã€@ã€.ã€+ã€-ã€_ ãŒä½¿ç”¨ã§ãã¾ã™ã€‚</p>
    </div>
    {% endif %}
    
    {{ form.as_p }}
    
    <button type="submit" style="margin-top: 30px;">
        âœ… ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã¦ç¶šè¡Œ
    </button>
</form>

<div class="footer-text" style="margin-top: 30px;">
    <p>æ—¢ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ã™ã‹ï¼Ÿ <a href="/">ãƒ­ã‚°ã‚¤ãƒ³</a></p>
</div>

<script>
    // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ™‚ã®ç¢ºèª
    document.querySelector('form').addEventListener('submit', function(e) {
        const email = document.getElementById('id_email').value;
        if (!email) {
            e.preventDefault();
            alert('ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        }
    });
</script>
{% endblock %}

