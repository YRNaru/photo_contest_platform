{% extends "base.html" %}

{% block title %}èªè¨¼ã‚¨ãƒ©ãƒ¼ - VRChat Photo Contest{% endblock %}

{% block header_title %}âŒ èªè¨¼ã‚¨ãƒ©ãƒ¼{% endblock %}
{% block header_subtitle %}ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸ{% endblock %}

{% block content %}
<div style="text-align: center; padding: 30px 0;">
    <div style="font-size: 80px; margin-bottom: 20px;">ğŸ˜•</div>
    
    <h2 style="color: #333; margin-bottom: 15px; font-size: 1.5em;">èªè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸ</h2>
    
    <div style="background: #fee; padding: 20px; border-radius: 10px; margin: 30px 0; border: 2px solid #fcc;">
        <p style="color: #c33; margin: 0; margin-bottom: 10px;">
            {% if provider %}
                {{ provider.name }} ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã®èªè¨¼ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚
            {% else %}
                ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã®èªè¨¼ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚
            {% endif %}
        </p>

        {# allauth ãŒæ¸¡ã—ã¦ãã‚‹ auth_error ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æƒ…å ±ã‚’è¡¨ç¤º #}
        {% if auth_error %}
            <p style="color: #c33; margin: 0; font-size: 0.9em; word-break: break-all;">
                <strong>ã‚¨ãƒ©ãƒ¼è©³ç´°:</strong>
                {% if auth_error.message %}
                    {{ auth_error.message }}
                {% elif auth_error.exception %}
                    {{ auth_error.exception }}
                {% else %}
                    {{ auth_error }}
                {% endif %}
            </p>
        {% elif request.GET.error %}
            <p style="color: #c33; margin: 0; font-size: 0.9em; word-break: break-all;">
                <strong>ã‚¨ãƒ©ãƒ¼è©³ç´°:</strong> {{ request.GET.error|truncatewords:20 }}
            </p>
        {% endif %}

        {% if DEBUG %}
            <div style="margin-top: 15px; padding: 10px; background: #fff; border: 1px solid #ccc; border-radius: 5px; text-align: left; font-size: 0.85em; color: #666;">
                <strong>ãƒ‡ãƒãƒƒã‚°æƒ…å ±:</strong><br>
                Provider: {% if provider %}{{ provider.name }}{% else %}ä¸æ˜{% endif %}<br>
                Time: {% now "Y-m-d H:i:s" %}
            </div>
        {% endif %}
    </div>
    
    <div style="color: #666; margin-bottom: 30px;">
        <p style="margin-bottom: 10px;">ä»¥ä¸‹ã®ç‚¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š</p>
        <ul style="text-align: left; max-width: 400px; margin: 20px auto; line-height: 1.8;">
            <li>ãƒ–ãƒ©ã‚¦ã‚¶ã®CookieãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹</li>
            <li>ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ–ãƒ­ãƒƒã‚«ãƒ¼ãŒç„¡åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹</li>
            <li>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šãŒæ­£å¸¸ã‹</li>
            <li>Render.comã®ãƒ­ã‚°ï¼ˆLogsã‚¿ãƒ–ï¼‰ã§ã‚¨ãƒ©ãƒ¼è©³ç´°ã‚’ç¢ºèª</li>
        </ul>
        <div style="margin-top: 20px; padding: 15px; background: #f0f0f0; border-radius: 5px; font-size: 0.9em;">
            <strong>ğŸ’¡ ãƒ­ã‚°ã®ç¢ºèªæ–¹æ³•:</strong><br>
            Render.comãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ â†’ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ â†’ <strong>Logs</strong> ã‚¿ãƒ–<br>
            ä»¥ä¸‹ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢: <code>pre_social_login</code>, <code>Error in</code>, <code>OAuth</code>
        </div>
    </div>
    
    <div class="social-buttons" style="max-width: 400px; margin: 0 auto;">
        <a href="{% url 'twitter_oauth2_login' %}" class="social-btn social-btn-twitter">
            <span style="font-size: 20px; margin-right: 10px;">ğ•</span>
            Twitter (X) ã§ã‚‚ã†ä¸€åº¦è©¦ã™
        </a>
        
        <a href="{% url 'google_login' %}" class="social-btn social-btn-google">
            <span style="font-size: 20px; margin-right: 10px;">G</span>
            Google ã§ã‚‚ã†ä¸€åº¦è©¦ã™
        </a>
    </div>
    
    <div class="footer-text" style="margin-top: 30px;">
        <a href="/">ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</a>
    </div>
</div>
{% endblock %}

